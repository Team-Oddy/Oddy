{% extends 'base.html' %}
{% load static %}

{% block title %}Oddy-test{% endblock %}

{% block content %}

<div id="test-page-container"></div>

<script>
let questions = [
    {
        question: '질문 1',
        answers: ['답변 1-1', '답변 1-2', '답변 1-3']
    },
    {
        question: '질문 2',
        answers: ['답변 2-1', '답변 2-2', '답변 2-3']
    },
    {
        question: '질문 3',
        answers: ['답변 3-1', '답변 3-2', '답변 3-3']
    },
    {
        question: '질문 4',
        answers: ['답변 4-1', '답변 4-2', '답변 4-3']
    },
    {
        question: '질문 5',
        answers: ['답변 5-1', '답변 5-2', '답변 5-3']
    }
];

let currentPage = 0;

function createPage(index) {
    let totalPages = questions.length;
    let pageContainer = document.getElementById('test-page-container');

    let pageDiv = document.createElement('div');
    pageDiv.id = `test-page${index + 1}`;
    pageDiv.classList.add('test-page');
    if (index === 0) pageDiv.classList.add('test-active');

    let nav = document.createElement('h2');
    if (index > 0) {
        let prevLink = document.createElement('a');
        prevLink.innerHTML = '&lt;';
        prevLink.href = 'javascript:void(0)';
        prevLink.onclick = () => showPage(index - 1);
        nav.appendChild(prevLink);
    }
    let pageNumber = document.createElement('span');
    pageNumber.classList.add('test-page-number');
    pageNumber.textContent = `${index + 1}/${totalPages}`;
    nav.appendChild(pageNumber);
    if (index < totalPages - 1) {
        let nextLink = document.createElement('a');
        nextLink.innerHTML = '&gt;';
        nextLink.href = 'javascript:void(0)';
        nextLink.onclick = () => showPage(index + 1);
        nav.appendChild(nextLink);
    }
    pageDiv.appendChild(nav);

    let question = document.createElement('h3');
    question.textContent = questions[index].question;
    pageDiv.appendChild(question);

    questions[index].answers.forEach(answer => {
        let answerButton = document.createElement('button');
        answerButton.textContent = answer;
        answerButton.onclick = (event) => highlightButton(event.target);
        pageDiv.appendChild(answerButton);
        pageDiv.appendChild(document.createElement('br'));
    });

    let completeButton = document.createElement('button');
    completeButton.textContent = (index === totalPages - 1) ? '완료하기' : '다음';
    completeButton.onclick = () => {
        if (index === totalPages - 1) {
            completeTest();
        } else {
            showPage(index + 1);
        }
    };
    pageDiv.appendChild(completeButton);

    pageContainer.appendChild(pageDiv);
}

function showPage(pageIndex) {
    currentPage = pageIndex;
    document.querySelectorAll('.test-page').forEach(page => page.classList.remove('test-active'));
    document.getElementById(`test-page${pageIndex + 1}`).classList.add('test-active');
}

function completeTest() {
    let resultPage = document.createElement('div');
    resultPage.classList.add('test-page', 'test-active');
    resultPage.innerHTML = `
        <h2>테스트 결과</h2>
        <p>00님의 여행 유형은 ~이에요!</p>
        <p>여행 모임 입장하기</p>
    `;
    document.getElementById('test-page-container').innerHTML = '';
    document.getElementById('test-page-container').appendChild(resultPage);
}

function highlightButton(button) {
    let buttons = button.parentNode.querySelectorAll('button');
    buttons.forEach(btn => btn.classList.remove('test-selected'));
    button.classList.add('test-selected');
}

document.addEventListener('DOMContentLoaded', () => {
    questions.forEach((_, index) => createPage(index));
});
</script>


{% endblock %}







{% comment %}
{% extends 'base.html' %}
{% load static %}

{% block title %}Oddy-test{% endblock %}

{% block content %}

<div id="page1" class="page active">
    <h2>
        <button onclick="showPage('page2')">></button>
        <span class="page-number">1/5</span>
    </h2>
    <h3>질문</h3>
    <button onclick="showPage('page2')">답변 1</button><br>
    <button onclick="showPage('page2')">답변 2</button><br>
    <button onclick="showPage('page2')">답변 3</button><br>
    <button onclick="completeTest()">완료</button>
</div>

<div id="page2" class="page">
    <h2>
        <button onclick="showPage('page1')"><</button>
        <span class="page-number">2/5</span>
        <button onclick="showPage('page3')">></button>
    </h2>
    <h3>질문</h3>
    <button onclick="showPage('page3')">답변 1</button><br>
    <button onclick="showPage('page3')">답변 2</button><br>
    <button onclick="showPage('page3')">답변 3</button><br>
    <button onclick="completeTest()">완료</button>
</div>

<div id="page3" class="page">
    <h2>
        <button onclick="showPage('page2')"><</button>
        <span class="page-number">3/5</span>
        <button onclick="showPage('page4')">></button>
    </h2>
    <h3>질문</h3>
    <button onclick="showPage('page4')">답변 1</button><br>
    <button onclick="showPage('page4')">답변 2</button><br>
    <button onclick="showPage('page4')">답변 3</button><br>
    <button onclick="completeTest()">완료</button>
</div>

<div id="page4" class="page">
    <h2>
        <button onclick="showPage('page3')"><</button>
        <span class="page-number">4/5</span>
        <button onclick="showPage('page5')">></button>
    </h2>
    <h3>질문</h3>
    <button onclick="showPage('page5')">답변 1</button><br>
    <button onclick="showPage('page5')">답변 2</button><br>
    <button onclick="showPage('page5')">답변 3</button><br>
    <button onclick="completeTest()">완료</button>
</div>

<div id="page5" class="page">
    <h2>
        <button onclick="showPage('page4')"><</button>
        <span class="page-number">5/5</span>
    </h2>
    <h3>질문</h3>
    <button onclick="showPage('page5')">답변 1</button><br>
    <button onclick="showPage('page5')">답변 2</button><br>
    <button onclick="showPage('page5')">답변 3</button><br>
    <button onclick="completeTest()">완료</button>
</div>

<script>
function showPage(pageId) {
    document.querySelectorAll('.page').forEach(page => page.classList.remove('active'));
    document.getElementById(pageId).classList.add('active');
}

function completeTest() {
    alert('테스트가 완료되었습니다!');
}
</script>
{%  endcomment%}


